<section class="aluno-header">
  <div>
    <h1>Meus Treinos</h1>
    <p>Aqui você acompanha suas inscrições e pode cancelar quando necessário.</p>
  </div>
  <div class="aluno-actions">
    <a class="btn" routerLink="/aluno/novo-treino">+ Novo treino</a>
  </div>
</section>

<section class="aluno-stats" aria-label="Resumo">
  <div class="aluno-stat">
    <span>Total de inscrições</span>
    <strong>{{ inscricoes().length }}</strong>
  </div>
  <div class="aluno-stat">
    <span>Ativas</span>
    <strong>{{ ativasCount() }}</strong>
  </div>
</section>

@if (ativasCount() > 0) {
<section class="inscricoes-grid" aria-live="polite">
  @for (i of inscricoesAtivas(); track i.id) {
  <article class="inscricao-card">
    <header>
      <h2>{{ i.treino_detalhes?.titulo || 'Treino #' + i.treino }}</h2>
      <div class="inscricao-meta">
        <span>{{ i.treino_detalhes?.data | date:'dd/MM/yyyy' }}</span>
        <span>{{ i.treino_detalhes?.hora_inicio }} - {{ i.treino_detalhes?.hora_fim }}</span>
        <span>CT: {{ i.treino_detalhes?.ct_nome }}</span>
      </div>
    </header>
    <ul class="inscricao-details">
      <li>Inscrição: {{ i.data_inscricao | date:'dd/MM/yyyy HH:mm' }}</li>
      <li>Aluno: {{ i.aluno_nome || 'Você' }}</li>
    </ul>
    <p>
      @if (i.status === 'CONFIRMADA') {
      <span class="inscricao-status inscricao-status--confirmada">CONFIRMADA</span>
      } @else if (i.status === 'PENDENTE') {
      <span class="inscricao-status inscricao-status--pendente">PENDENTE</span>
      } @else {
      <span class="inscricao-status inscricao-status--cancelada">CANCELADA</span>
      }
    </p>
    <div class="inscricao-actions">
      @if (i.status !== 'CANCELADA') {
      <button type="button" (click)="cancelar(i.id)" class="btn btn-outline btn-sm">Cancelar</button>
      }
    </div>
  </article>
  }
</section>
} @else {
<div class="empty-box">
  <h2>Nenhuma inscrição ainda</h2>
  <p>Você ainda não se inscreveu em nenhum treino. Que tal começar agora?</p>
  <a class="btn" routerLink="/aluno/novo-treino">Encontrar treinos</a>
</div>
}